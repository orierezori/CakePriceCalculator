<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cake Price Calculator</title>
  <style>
    * { box-sizing: border-box; }
    
    body {
      font-family: Arial, sans-serif;
      padding: 1em;
      margin: 0;
      background-color: #FFF7E0;
      max-width: 600px;
      margin: 0 auto;
      color: #8B4050;
    }

    h1 {
      text-align: center;
      color: #8B4050;
      font-size: 2rem;
      margin: 1.5rem 0;
      text-shadow: 1px 1px 2px rgba(213, 196, 140, 0.3);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      background: #F7D7E3;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(139, 64, 80, 0.1);
    }

    label {
      font-weight: 600;
      color: #8B4050;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 0.8rem;
      border: 2px solid #E9E3F9;
      border-radius: 8px;
      font-size: 1rem;
      background: white;
      color: #8B4050;
      -webkit-appearance: none;
      appearance: none;
      transition: border-color 0.2s ease;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: #FFD8B1;
      box-shadow: 0 0 0 3px rgba(255, 216, 177, 0.2);
    }

    select {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%238B4050' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.5rem center;
      background-size: 1.2rem;
      padding-right: 2.5rem;
    }

    input[type="checkbox"] {
      width: 1.2rem;
      height: 1.2rem;
      margin: 0;
      accent-color: #FFD8B1;
    }

    label:has(> input[type="checkbox"]) {
      flex-direction: row;
      align-items: center;
      gap: 0.8rem;
    }

    .hidden {
      display: none;
    }

    select[multiple] {
      height: auto;
      min-height: 8rem;
      padding: 0;
    }

    select[multiple] option {
      padding: 0.8rem;
      border-bottom: 1px solid #E9E3F9;
    }

    option:checked {
      background-color: #FFD8B1;
      color: #8B4050;
    }

    #toppersLabel {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      padding: 1rem;
      border: 2px solid #E9E3F9;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.5);
    }

    h2 {
      text-align: center;
      color: #8B4050;
      margin-top: 2rem;
      padding: 1.2rem;
      background: #E9E3F9;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(139, 64, 80, 0.1);
    }

    @media (max-width: 480px) {
      body {
        padding: 0.8rem;
      }

      form {
        padding: 1rem;
        border-radius: 8px;
      }

      h1 {
        font-size: 1.5rem;
        margin: 1rem 0;
      }

      input[type="text"],
      input[type="number"],
      select {
        padding: 0.7rem;
        font-size: 16px;
      }

      #toppersLabel {
        padding: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <h1>Cake Price Calculator</h1>
  <form id="cakeForm">
    <label>Type
      <select id="type">
        <option value="cake">Cake</option>
        <option value="cupcake">Cupcake</option>
      </select>
    </label>
    <label>Amount
      <input type="number" id="amount" min="1" max="500" value="1">
    </label>
    <label id="cakeStyleLabel">Cake Style
      <select id="cakeStyle">
        <option value="classic">Classic</option>
        <option value="custom">Custom Made</option>
      </select>
    </label>
    <label>Taste of Cake
      <select id="taste">
        <option value="vanilla">Vanilla</option>
        <option value="chocolate">Chocolate</option>
        <option value="carrot">Carrot</option>
        <option value="orange">Orange</option>
      </select>
    </label>
    <label>Size
      <select id="size">
        <option value="18">18''</option>
        <option value="20">20''</option>
        <option value="mini">Mini</option>
        <option value="regular">Regular</option>
      </select>
    </label>
    <label id="creamToppingLabel">Cream Topping
      <input type="checkbox" id="creamTopping">
    </label>
    <label id="layersLabel">Layers
      <select id="layers">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
      </select>
    </label>
    <label>Natural Colors
      <input type="checkbox" id="naturalColors">
    </label>
    <label id="smallCandiesLabel">Small Candies
      <input type="checkbox" id="smallCandies">
    </label>
    <label id="pipingLabel">Piping
      <input type="checkbox" id="piping">
    </label>
    <label id="lettersLabel">Letters on Cake
      <select id="letters">
        <option value="no">No</option>
        <option value="small">Small</option>
        <option value="big">Big</option>
      </select>
    </label>
    <label id="nameLabel">Name on Cake
      <input type="text" id="cakeName">
    </label>
    <label id="nutsLabel">Nuts
      <input type="checkbox" id="nuts">
    </label>
    <label id="fruitsLabel">Fruits
      <input type="checkbox" id="fruits">
    </label>
    <label id="layerFillingLabel">Layer Filling
      <select id="layerFilling" size="5" multiple>
        <option value="nuts">Nuts</option>
        <option value="fruits">Fruits</option>
        <option value="oreo">Oreo</option>
        <option value="lotus">Lotus</option>
        <option value="jam">Jam</option>
      </select>
    </label>
    <div id="toppersLabel">
      <label>Toppers 1
        <input type="checkbox" id="topper1">
      </label>
      <label>Toppers 2
        <input type="checkbox" id="topper2">
      </label>
    </div>
  </form>
  <h2>Total Price: â‚¬<span id="totalPrice">0.00</span></h2>

  <script>
    const form = document.getElementById('cakeForm');
    const totalPriceEl = document.getElementById('totalPrice');

    function calculatePrice() {
      const type = document.getElementById('type').value;
      const amount = parseInt(document.getElementById('amount').value);
      const cakeStyle = document.getElementById('cakeStyle').value;
      const size = document.getElementById('size').value;
      const creamTopping = document.getElementById('creamTopping').checked;
      const layers = parseInt(document.getElementById('layers').value);
      const naturalColors = document.getElementById('naturalColors').checked;
      const smallCandies = document.getElementById('smallCandies').checked;
      const piping = document.getElementById('piping').checked;
      const letters = document.getElementById('letters').value;
      const cakeName = document.getElementById('cakeName').value || "";
      const nuts = document.getElementById('nuts').checked;
      const fruits = document.getElementById('fruits').checked;
      const layerFilling = [...document.getElementById('layerFilling').options].filter(o => o.selected).map(o => o.value);
      const topper1 = document.getElementById('topper1').checked;
      const topper2 = document.getElementById('topper2').checked;

      let price = 0;

      if (type === 'cake') {
        price += size === '18' ? 30 : 35;
        price += (layers - 1) * 10;
        if (naturalColors) price += 2;
        if (smallCandies) price += 3;
        if (piping) price += cakeStyle === 'classic' ? 7 : 15;
        if (letters !== 'no') price += (letters === 'small' ? 0.2 : 0.5) * cakeName.length;
        if (nuts) price += 5;
        if (fruits) price += 5;
        if (layers > 1 && layerFilling.length > 0) {
          const totalFilling = layerFilling.reduce((sum, fill) => sum + (fill === 'jam' ? 1 : 1.5), 0);
          price += (layers - 1) * totalFilling;
        }
        if (topper1) price += 10;
        if (topper2) price += 10;
      } else {
        price += size === 'mini' ? 2 * amount : 4 * amount;
        if (creamTopping) price += 0.5 * amount;
        if (naturalColors) {
          if (amount <= 12) price += 1;
          else if (amount <= 30) price += 2;
          else price += 2 + Math.ceil((amount - 30) / 20) * 2;
        }
      }

      totalPriceEl.textContent = price.toFixed(2);
    }

    function updateVisibility() {
      const prevType = document.getElementById('type').dataset.prevType || '';
      const currentType = document.getElementById('type').value;
      if (prevType && prevType !== currentType) {
        form.reset();
        document.getElementById('amount').value = 1;
      }
      document.getElementById('type').dataset.prevType = currentType;
      const type = document.getElementById('type').value;
      const layers = parseInt(document.getElementById('layers').value);
      const letters = document.getElementById('letters').value;

      const cakeOnly = ["cakeStyleLabel", "layersLabel", "smallCandiesLabel", "pipingLabel", "lettersLabel", "nameLabel", "nutsLabel", "fruitsLabel", "toppersLabel"];
      const cupcakeOnly = ["creamToppingLabel"];

      cakeOnly.forEach(id => document.getElementById(id).classList.toggle('hidden', type !== 'cake'));
      cupcakeOnly.forEach(id => document.getElementById(id).classList.toggle('hidden', type !== 'cupcake'));

      document.getElementById('layerFillingLabel').classList.toggle('hidden', type !== 'cake' || layers === 1);
      const nameLabel = document.getElementById('nameLabel');
      const cakeNameInput = document.getElementById('cakeName');
      const hideName = type !== 'cake' || letters === 'no';
      nameLabel.classList.toggle('hidden', hideName);
      if (hideName) cakeNameInput.value = '';

      const taste = document.getElementById('taste');
      const size = document.getElementById('size');
      Array.from(taste.options).forEach(opt => {
        if (type === 'cake' && (opt.value === 'carrot' || opt.value === 'orange')) opt.disabled = true;
        else if (type === 'cupcake' && (opt.value === 'carrot' || opt.value === 'orange')) opt.disabled = false;
      });

      Array.from(size.options).forEach(opt => {
        if (type === 'cake' && (opt.value === 'mini' || opt.value === 'regular')) opt.disabled = true;
        else if (type === 'cupcake' && (opt.value === '18' || opt.value === '20')) opt.disabled = true;
        else opt.disabled = false;
      });
    }

    form.addEventListener('change', () => {
      updateVisibility();
      calculatePrice();
    });

    updateVisibility();
    calculatePrice();
  </script>
</body>
</html>